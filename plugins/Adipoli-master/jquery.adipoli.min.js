!function(i){i.fn.adipoli=function(e){function t(e,t){for(var o=0;o<t.slices;o++){var a=Math.round(e.width()/t.slices);o==t.slices-1?e.children(".adipoli-after").append(i('<div class="adipoli-slice"></div>').css({left:a*o+"px",width:e.width()-a*o+"px",height:"0px",opacity:"0",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(a+o*a-a)+"px 0%"})):e.children(".adipoli-after").append(i('<div class="adipoli-slice"></div>').css({left:a*o+"px",width:a+"px",height:"0px",opacity:"0",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(a+o*a-a)+"px 0%"}))}}function o(e,t){for(var o=Math.round(e.width()/t.boxCols),a=Math.round(e.height()/t.boxRows),r=0;r<t.boxRows;r++)for(var h=0;h<t.boxCols;h++)h==t.boxCols-1?e.children(".adipoli-after").append(i('<div class="adipoli-box"></div>').css({opacity:0,left:o*h+"px",top:a*r+"px",width:e.width()-o*h+"px",height:a+"px",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(o+h*o-o)+"px -"+(a+r*a-a)+"px"})):e.children(".adipoli-after").append(i('<div class="adipoli-box"></div>').css({opacity:0,left:o*h+"px",top:a*r+"px",width:o+"px",height:a+"px",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(o+h*o-o)+"px -"+(a+r*a-a)+"px"}))}function a(i){for(var e,t,o=i.length;o;e=parseInt(Math.random()*o),t=i[--o],i[o]=i[e],i[e]=t);return i}var r=i.extend({startEffect:"transparent",hoverEffect:"normal",imageOpacity:.5,animSpeed:300,fillColor:"#000",textColor:"#fff",overlayText:"",slices:10,boxCols:5,boxRows:3,popOutMargin:10,popOutShadow:10},e);return i(this).one("load",function(){if(i(this).wrap(function(){return'<div class="adipoli-wrapper '+i(this).attr("class")+'" style="width:'+i(this).width()+"px; height:"+i(this).height()+'px;"/>'}),i(this).parent().append('<div class="adipoli-before '+i(this).attr("class")+'" style="display:none;width:'+i(this).width()+"px; height:"+i(this).height()+'px;"><img src="'+i(this).attr("src")+'"/></div>'),i(this).parent().append('<div class="adipoli-after '+i(this).attr("class")+'" style="display:none;width:'+i(this).width()+"px; height:"+i(this).height()+'px;"></div>'),"transparent"==r.startEffect)i(this).hide(),i(this).siblings(".adipoli-before").css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*r.imageOpacity+')"',filter:"alpha(opacity="+100*r.imageOpacity+")","-moz-opacity":r.imageOpacity,"-khtml-opacity":r.imageOpacity,opacity:r.imageOpacity}).show();else if("grayscale"==r.startEffect){var e=i(this);e.hide(),e.siblings(".adipoli-before").show(),e.siblings(".adipoli-before").children("img").each(function(){this.src=function(i){var e=document.createElement("canvas"),t=e.getContext("2d"),o=new Image;o.src=i,e.width=o.width,e.height=o.height,t.drawImage(o,0,0);for(var a=t.getImageData(0,0,e.width,e.height),r=0;r<a.height;r++)for(var h=0;h<a.width;h++){var s=4*r*a.width+4*h,c=(a.data[s]+a.data[s+1]+a.data[s+2])/3;a.data[s]=c,a.data[s+1]=c,a.data[s+2]=c}return t.putImageData(a,0,0,0,0,a.width,a.height),e.toDataURL()}(this.src)})}else"normal"==r.startEffect?(i(this).hide(),i(this).siblings(".adipoli-before").show()):"overlay"==r.startEffect&&((e=i(this)).hide(),i(this).siblings(".adipoli-before").html(r.overlayText).css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*r.imageOpacity+')"',filter:"alpha(opacity="+100*r.imageOpacity+")","-moz-opacity":r.imageOpacity,"-khtml-opacity":r.imageOpacity,opacity:r.imageOpacity,background:r.fillColor,color:r.textColor}).fadeIn(),e.show());i(this).parent().bind("mouseenter",function(){if("normal"==r.hoverEffect){var e=i(this);e.children(".adipoli-after").html('<img src="'+e.children("img").attr("src")+'"/>').fadeIn(r.animSpeed)}else if("popout"==r.hoverEffect){var h=(e=i(this)).children("img").width(),s=e.children("img").height();e.children(".adipoli-after").html('<img src="'+e.children("img").attr("src")+'"/>');var c=e.children(".adipoli-after").children("img");c.width(h+2*r.popOutMargin),c.height(s+2*r.popOutMargin),e.children(".adipoli-after").width(h+2*r.popOutMargin),e.children(".adipoli-after").height(s+2*r.popOutMargin),e.children(".adipoli-after").css({left:"-"+r.popOutMargin+"px",top:"-"+r.popOutMargin+"px","box-shadow":"0px 0px "+r.popOutShadow+"px #000"}).show()}else if("sliceDown"==r.hoverEffect||"sliceDownLeft"==r.hoverEffect||"sliceUp"==r.hoverEffect||"sliceUpLeft"==r.hoverEffect||"sliceUpRandom"==r.hoverEffect||"sliceDownRandom"==r.hoverEffect){i(this).children(".adipoli-after").show(),t(i(this),r);var n=0,p=0,l=i(".adipoli-slice",i(this));"sliceDownLeft"!=r.hoverEffect&&"sliceUpLeft"!=r.hoverEffect||(l=i(".adipoli-slice",i(this))._reverse()),"sliceUpRandom"!=r.hoverEffect&&"sliceDownRandom"!=r.hoverEffect||(l=a(i(".adipoli-slice",i(this)))),l.each(function(){var e=i(this);"sliceDown"==r.hoverEffect||"sliceDownLeft"==r.hoverEffect?e.css({top:"0px"}):"sliceUp"!=r.hoverEffect&&"sliceUpLeft"!=r.hoverEffect||e.css({bottom:"0px"}),p==r.slices-1?setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+n),n+=50,p++})}else if("sliceUpDown"==r.hoverEffect||"sliceUpDownLeft"==r.hoverEffect){i(this).children(".adipoli-after").show(),t(i(this),r),n=0,p=0;var f=0;l=i(".adipoli-slice",i(this)),"sliceUpDownLeft"==r.hoverEffect&&(l=i(".adipoli-slice",i(this))._reverse()),l.each(function(){var e=i(this);0==p?(e.css("top","0px"),p++):(e.css("bottom","0px"),p=0),f==r.slices-1?setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+n),n+=50,f++})}else if("fold"==r.hoverEffect||"foldLeft"==r.hoverEffect)i(this).children(".adipoli-after").show(),t(e=i(this),r),n=0,p=0,l=i(".adipoli-slice",e),"foldLeft"==r.hoverEffect&&(l=i(".adipoli-slice",i(this))._reverse()),l.each(function(){var e=i(this),t=e.width();e.css({top:"0px",height:"100%",width:"0px"}),p==r.slices-1?setTimeout(function(){e.animate({width:t,opacity:"1.0"},r.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({width:t,opacity:"1.0"},r.animSpeed)},100+n),n+=50,p++});else if("boxRandom"==r.hoverEffect){i(this).children(".adipoli-after").show(),o(e=i(this),r);var d=r.boxCols*r.boxRows;p=0,n=0;var m=a(i(".adipoli-box",e));m.each(function(){var e=i(this);p==d-1?setTimeout(function(){e.animate({opacity:"1"},r.animSpeed,"",function(){})},100+n):setTimeout(function(){e.animate({opacity:"1"},r.animSpeed)},100+n),n+=20,p++})}else if("boxRain"==r.hoverEffect||"boxRainReverse"==r.hoverEffect||"boxRainGrow"==r.hoverEffect||"boxRainGrowReverse"==r.hoverEffect){i(this).children(".adipoli-after").show(),o(e=i(this),r),d=r.boxCols*r.boxRows,p=0,n=0;var v=0,g=0,u=new Array;u[v]=new Array,m=i(".adipoli-box",e),"boxRainReverse"!=r.hoverEffect&&"boxRainGrowReverse"!=r.hoverEffect||(m=i(".adipoli-box",e)._reverse()),m.each(function(){u[v][g]=i(this),++g==r.boxCols&&(g=0,u[++v]=new Array)});for(var x=0;x<2*r.boxCols;x++){for(var w=x,b=0;b<r.boxRows;b++)w>=0&&w<r.boxCols&&(!function(e,t,o,a,h){var s=i(u[b][t]),c=s.width(),n=s.height();"boxRainGrow"!=r.hoverEffect&&"boxRainGrowReverse"!=r.hoverEffect||s.width(0).height(0),a==h-1?setTimeout(function(){s.animate({opacity:"1",width:c,height:n},r.animSpeed/1.3,"",function(){})},100+o):setTimeout(function(){s.animate({opacity:"1",width:c,height:n},r.animSpeed/1.3)},100+o)}(0,w,n,p,d),p++),w--;n+=100}}}),i(this).parent().bind("mouseleave",function(){i(this).children(".adipoli-after").html("").hide()})}).each(function(){this.complete&&i(this).load()}),i(this)},i.fn._reverse=[].reverse}(jQuery);